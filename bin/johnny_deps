#!/usr/bin/env sh

set -e

## The Godeps file is expected to have lines like so:
#
# github.com/VividCortex/robustly v2.6
#
## where the first element is the import path and the second is a tag
## in the project.

while read package version; do
  go get -v -u -d $package/...
  echo "Setting $package to version $version"
  GIT_DIR="$GOPATH/src/$package/.git" git checkout $version
  echo "Installing $package"
  go install $package/...
done < ${1-"Godeps"}
